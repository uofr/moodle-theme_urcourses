{"version":3,"file":"lightboxes.min.js","sources":["../src/lightboxes.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Theme UR Courses - Display images linked with rel=\"lightbox\" in a modal.\n */\n\nimport $ from 'jquery';\nimport LightboxModal from 'theme_urcourses/lightbox_modal';\nimport Templates from 'core/templates';\n\nconst SELECTORS = {\n    PAGE_CONTENT: '#page-content',\n    LIGHTBOX_IMAGE: 'a[rel=\"lightbox\"]'\n};\n\nconst TEMPLATES = {\n    LIGHTBOX_MODAL_BODY: 'theme_urcourses/lightbox_modal_body'\n};\n\nexport const init = () => {\n    if ($(SELECTORS.LIGHTBOX_IMAGE).length === 0) {\n        return;\n    }\n\n    registerEventListeners($(SELECTORS.PAGE_CONTENT));\n};\n\nconst registerEventListeners = (root) => {\n    root.on('click', SELECTORS.LIGHTBOX_IMAGE, (e) => {\n        e.preventDefault();\n        const image = $(e.target);\n        showLightboxModal(image.attr('src'), image.attr('title'));\n    });\n};\n\nconst showLightboxModal = (imgsrc, caption) => {\n    LightboxModal.create({\n        body: Templates.render(TEMPLATES.LIGHTBOX_MODAL_BODY, {\n            imgsrc: imgsrc,\n            caption: caption\n        }),\n        removeOnClose: true,\n        show: true,\n        large: true\n    });\n};"],"names":["SELECTORS","TEMPLATES","length","registerEventListeners","root","on","e","preventDefault","image","target","showLightboxModal","attr","imgsrc","caption","create","body","Templates","render","removeOnClose","show","large"],"mappings":"qdAuBMA,uBACY,gBADZA,yBAEc,oBAGdC,8BACmB,oDAGL,KAC2B,KAAvC,mBAAED,0BAA0BE,QAIhCC,wBAAuB,mBAAEH,gCAGvBG,uBAA0BC,OAC5BA,KAAKC,GAAG,QAASL,0BAA2BM,IACxCA,EAAEC,uBACIC,OAAQ,mBAAEF,EAAEG,QAClBC,kBAAkBF,MAAMG,KAAK,OAAQH,MAAMG,KAAK,cAIlDD,kBAAoB,CAACE,OAAQC,mCACjBC,OAAO,CACjBC,KAAMC,mBAAUC,OAAOhB,8BAA+B,CAClDW,OAAQA,OACRC,QAASA,UAEbK,eAAe,EACfC,MAAM,EACNC,OAAO"}