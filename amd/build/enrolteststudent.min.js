define("theme_urcourses/enrolteststudent",["exports","theme_urcourses/repository","jquery","core/notification","core/modal","core/modal_save_cancel","core/modal_events","core/str"],(function(_exports,Repository,_jquery,_notification,_modal,_modal_save_cancel,_modal_events,_str){function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _getRequireWildcardCache(nodeInterop){if("function"!=typeof WeakMap)return null;var cacheBabelInterop=new WeakMap,cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.init=void 0,Repository=function(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule)return obj;if(null===obj||"object"!=typeof obj&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if("default"!==key&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(Repository),_jquery=_interopRequireDefault(_jquery),_notification=_interopRequireDefault(_notification),_modal=_interopRequireDefault(_modal),_modal_save_cancel=_interopRequireDefault(_modal_save_cancel),_modal_events=_interopRequireDefault(_modal_events);const SELECTORS_ENROL='[data-key="enrol_test_student"] a',SELECTORS_ENROL_LIST='[data-key="enrol_test_student"',SELECTORS_UNENROL='[data-key="unenrol_test_student"] a',SELECTORS_UNENROL_LIST='[data-key="unenrol_test_student"]',SELECTORS_MOREMENU='[data-region="moredropdown"]';_exports.init=async courseid=>{registerEventListeners(courseid)};const registerEventListeners=courseid=>{(0,_jquery.default)(SELECTORS_MOREMENU).on("click",SELECTORS_ENROL,(e=>{e.preventDefault(),confirmEnrolTestStudent(courseid)})),(0,_jquery.default)(SELECTORS_MOREMENU).on("click",SELECTORS_UNENROL,(e=>{e.preventDefault(),confirmUnenrolTestStudent(courseid)}))},confirmEnrolTestStudent=async courseid=>{(await _modal_save_cancel.default.create({title:(0,_str.get_string)("teststudentenrol_title","theme_urcourses"),body:(0,_str.get_string)("teststudentenrol_body","theme_urcourses"),removeOnClose:!0,show:!0,buttons:{save:(0,_str.get_string)("teststudentenrol_button","theme_urcourses")}})).getRoot().on(_modal_events.default.save,(()=>{enrolTestStudent(courseid)}))},enrolTestStudent=async courseid=>{try{await Repository.enrolTestStudent(courseid)&&(_modal.default.create({title:(0,_str.get_string)("teststudentenrolled_title","theme_urcourses"),body:(0,_str.get_string)("teststudentenrolled_body","theme_urcourses"),removeOnClose:!0,show:!0}),(0,_jquery.default)(SELECTORS_ENROL).text(await(0,_str.get_string)("unenrolurstudent","theme_urcourses")),(0,_jquery.default)(SELECTORS_ENROL_LIST).attr("data-key","unenrol_test_student"))}catch(error){_notification.default.exception(error)}},confirmUnenrolTestStudent=async courseid=>{(await _modal_save_cancel.default.create({title:(0,_str.get_string)("teststudentunenrol_title","theme_urcourses"),body:(0,_str.get_string)("teststudentunenrol_body","theme_urcourses"),removeOnClose:!0,show:!0,buttons:{save:(0,_str.get_string)("teststudentunenrol_button","theme_urcourses")}})).getRoot().on(_modal_events.default.save,(()=>{unenrolTestStudent(courseid)}))},unenrolTestStudent=async courseid=>{try{await Repository.unenrolTestStudent(courseid)&&(_modal.default.create({title:(0,_str.get_string)("teststudentunenrolled_title","theme_urcourses"),body:(0,_str.get_string)("teststudentunenrolled_body","theme_urcourses"),removeOnClose:!0,show:!0}),(0,_jquery.default)(SELECTORS_UNENROL).text(await(0,_str.get_string)("enrolurstudent","theme_urcourses")),(0,_jquery.default)(SELECTORS_UNENROL_LIST).attr("data-key","enrol_test_student"))}catch(error){_notification.default.exception(error)}}}));

//# sourceMappingURL=enrolteststudent.min.js.map